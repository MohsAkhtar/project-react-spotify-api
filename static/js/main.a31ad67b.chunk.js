(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(21)},15:function(e,t,n){},19:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(3),i=n.n(o),l=(n(15),n(1)),c=n.n(l),u=n(4),s=n(5),p=n(6),h=n(8),m=n(7),y=n(9),d=(n(19),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={token:"",deviceId:"",loggedIn:!1,error:"",trackName:"Track Name",artistName:"Artist Name",albumName:"Album Name",playing:!1,position:0,duration:0},n.playerCheckInterval=null,n}return Object(y.a)(t,e),Object(p.a)(t,[{key:"handleLogin",value:function(){var e=this;""!==this.state.token&&(this.setState({loggedIn:!0}),this.playerCheckInterval=setInterval(function(){return e.checkForPlayer()},1e3))}},{key:"checkForPlayer",value:function(){var e=this.state.token;null!==window.Spotify&&(clearInterval(this.playerCheckInterval),this.player=new window.Spotify.Player({name:"Mohs's Spotify Player",getOAuthToken:function(t){t(e)}}),this.createEventHandlers(),this.player.connect())}},{key:"createEventHandlers",value:function(){var e=this;this.player.on("initialization_error",function(e){console.error(e)}),this.player.on("authentication_error",function(t){console.error(t),e.setState({loggedIn:!1})}),this.player.on("account_error",function(e){console.error(e)}),this.player.on("playback_error",function(e){console.error(e)}),this.player.on("player_state_changed",function(t){e.onStateChanged(t)}),this.player.on("ready",function(){var t=Object(u.a)(c.a.mark(function t(n){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.device_id,console.log("Enjoy the sound!"),t.next=4,e.setState({deviceId:a});case 4:e.transferPlaybackHere();case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}},{key:"onStateChanged",value:function(e){if(null!==e){var t=e.track_window,n=t.current_track,a=t.position,r=t.duration,o=n.name,i=n.album.name,l=n.artists.map(function(e){return e.name}).join(", "),c=!e.paused;this.setState({position:a,duration:r,trackName:o,albumName:i,artistName:l,playing:c})}}},{key:"onPrevCick",value:function(){this.player.previousTrack()}},{key:"onPlayClick",value:function(){this.player.togglePlay()}},{key:"onNextClick",value:function(){this.player.nextTrack()}},{key:"transferPlaybackHere",value:function(){var e=this.state,t=e.deviceId,n=e.token;fetch("https://api.spotify.com/v1/me/player",{method:"PUT",headers:{authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({device_ids:[t],play:!0})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.token,a=t.loggedIn,o=t.artistName,i=t.trackName,l=t.albumName,c=t.error,u=(t.position,t.duration,t.playing);return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("h2",null,"Now Playing"),r.a.createElement("p",null,"A Spotify Web Playback API Demo.")),c&&r.a.createElement("p",null,"Error: ",c),a?r.a.createElement("div",null,r.a.createElement("p",null,"Artist: ",o),r.a.createElement("p",null,"Track: ",i),r.a.createElement("p",null,"Album: ",l),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return e.onPrevCick()}},"Previous"),r.a.createElement("button",{onClick:function(){return e.onPlayClick()}},u?"Pause":"Play"),r.a.createElement("button",{onClick:function(){return e.onNextClick()}},"Next"))):r.a.createElement("div",null,r.a.createElement("p",{className:"App-intro"},"Enter your Spotify access token. Get it from"," ",r.a.createElement("a",{href:"https://beta.developer.spotify.com/documentation/web-playback-sdk/quick-start/#authenticating-with-spotify"},"here"),"."),r.a.createElement("p",null,r.a.createElement("input",{type:"text",value:n,onChange:function(t){return e.setState({token:t.target.value})}})),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return e.handleLogin()}},"Go"))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(d,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.a31ad67b.chunk.js.map